<!DOCTYPE html>
<html lang="ko" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.0" />
    <meta name="description" content="Workshop">
<meta name="author" content="Jungyoul Yu">

    <link rel="shortcut icon" href="/workshop/images/favicon.ico" type="image/x-icon" />
<link rel="icon" href="/workshop/images/favicon.ico" type="image/x-icon" />

    <title>nginx-ingress :: Workshop</title>

    
    <link href="/workshop/css/nucleus.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/fontawesome-all.min.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/hybrid.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/featherlight.min.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/perfect-scrollbar.min.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/auto-complete.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/atom-one-dark-reasonable.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/theme.css?1572340181" rel="stylesheet">
    <link href="/workshop/css/hugo-theme.css?1572340181" rel="stylesheet">
    
      <link href="/workshop/css/theme-blue.css?1572340181" rel="stylesheet">
    

    <script src="/workshop/js/jquery-3.3.1.min.js?1572340181"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/workshop/kubernetes/nginx-ingress/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/workshop/">

	<svg id="grav-logo" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg"
		viewBox="76.78937988281251 14.286889648437501 346.421240234375 121.426220703125" preserveAspectRatio="xMidYMid">
		<defs>
			<filter id="editing-hover" x="-100%" y="-100%" width="300%" height="300%">
				<feFlood flood-color="#052b4a" result="flood"></feFlood>
				<feComposite operator="in" in2="SourceAlpha" in="flood" result="shadow"></feComposite>
				<feOffset dx="-4" dy="-4" in="SourceGraphic" result="offset-1"></feOffset>
				<feOffset dx="4" dy="4" in="shadow" result="offset-2"></feOffset>
				<feMerge>
					<feMergeNode in="offset-2"></feMergeNode>
					<feMergeNode in="offset-1"></feMergeNode>
				</feMerge>
			</filter>
		</defs>
		<g filter="url(#editing-hover)">
			<g transform="translate(132.1721932888031, 98.21906280517578)">
				<path
					d="M28.16 1.28L28.16 1.28L28.16 1.28Q20.42 1.28 20.42-4.74L20.42-4.74L20.42-4.74Q20.48-6.40 20.99-9.22L20.99-9.22L22.14-15.10L22.14-15.10Q23.87-23.42 23.87-25.28L23.87-25.28L23.87-25.28Q23.87-28.99 21.70-28.99L21.70-28.99L21.70-28.99Q18.05-28.99 16.13-19.46L16.13-19.46L12.35 0L-0.51 1.28L6.14-32.70L16.64-33.92L15.62-27.65L15.62-27.65Q18.62-33.92 27.84-33.92L27.84-33.92L27.84-33.92Q32.32-33.92 34.21-32.03L34.21-32.03L34.21-32.03Q36.10-30.14 36.10-25.92L36.10-25.92L36.10-25.92Q36.10-21.95 34.05-12.67L34.05-12.67L34.05-12.67Q33.09-8.51 33.09-6.94L33.09-6.94L33.09-6.94Q33.09-5.38 33.95-4.48L33.95-4.48L33.95-4.48Q34.82-3.58 36.10-3.46L36.10-3.46L36.10-3.46Q35.46-1.28 33.25 0L33.25 0L33.25 0Q31.04 1.28 28.16 1.28ZM44-1.92L44-1.92L44-1.92Q42.50-3.58 41.82-6.21L41.82-6.21L41.82-6.21Q41.15-8.83 41.15-13.12L41.15-13.12L41.15-13.12Q41.15-17.41 42.62-21.31L42.62-21.31L42.62-21.31Q44.10-25.22 46.78-28.03L46.78-28.03L46.78-28.03Q52.29-33.92 61.38-33.92L61.38-33.92L61.38-33.92Q64.64-33.92 67.01-32.83L67.01-32.83L77.95-33.92L73.22-8.96L73.22-8.96Q73.02-8.19 73.02-6.78L73.02-6.78L73.02-6.78Q73.02-5.38 73.89-4.48L73.89-4.48L73.89-4.48Q74.75-3.58 76.03-3.46L76.03-3.46L76.03-3.46Q75.39-1.28 73.06 0L73.06 0L73.06 0Q70.72 1.28 68.10 1.28L68.10 1.28L68.10 1.28Q65.47 1.28 63.71 0.29L63.71 0.29L63.71 0.29Q61.95-0.70 61.44-2.37L61.44-2.37L61.44-2.37Q60.42-0.77 58.24 0.26L58.24 0.26L58.24 0.26Q56.06 1.28 53.15 1.28L53.15 1.28L53.15 1.28Q50.24 1.28 47.87 0.51L47.87 0.51L47.87 0.51Q45.50-0.26 44-1.92ZM57.50-27.90L57.50-27.90L57.50-27.90Q56.77-26.75 56.13-24.80L56.13-24.80L56.13-24.80Q55.49-22.85 54.43-17.63L54.43-17.63L54.43-17.63Q53.38-12.42 53.38-8.70L53.38-8.70L53.38-8.70Q53.38-4.99 53.95-3.90L53.95-3.90L53.95-3.90Q54.53-2.82 55.55-2.82L55.55-2.82L55.55-2.82Q57.60-2.82 59.10-4.77L59.10-4.77L59.10-4.77Q60.61-6.72 61.18-10.18L61.18-10.18L64.58-28.93L64.58-28.93Q63.23-30.08 61.66-30.08L61.66-30.08L61.66-30.08Q60.10-30.08 59.17-29.57L59.17-29.57L59.17-29.57Q58.24-29.06 57.50-27.90ZM96.70-3.52L96.70-3.52L96.70-3.52Q94.72 1.28 88.38 1.28L88.38 1.28L88.38 1.28Q85.18 1.28 83.14-0.96L83.14-0.96L83.14-0.96Q81.47-2.82 81.47-4.93L81.47-4.93L81.47-4.93Q81.47-9.73 83.71-20.22L83.71-20.22L88.38-44.80L101.38-46.08L95.17-13.70L95.17-13.70Q94.08-8.96 94.08-7.30L94.08-7.30L94.08-7.30Q94.08-3.65 96.70-3.52ZM101.31-3.07L101.31-3.07L109.25-44.80L122.24-46.08L120.26-36.29L120.26-36.29Q119.55-33.28 118.66-31.17L118.66-31.17L118.66-31.17Q120.06-32.96 123.14-33.66L123.14-33.66L123.14-33.66Q124.03-33.92 125.12-33.92L125.12-33.92L125.12-33.92Q131.07-33.92 134.34-30.30L134.34-30.30L134.34-30.30Q137.60-26.69 137.60-19.71L137.60-19.71L137.60-19.71Q137.60-10.62 132.42-4.93L132.42-4.93L132.42-4.93Q126.85 1.28 116.74 1.28L116.74 1.28L116.74 1.28Q109.76 1.28 104.51-1.02L104.51-1.02L104.51-1.02Q102.66-1.86 101.31-3.07ZM117.57-22.40L114.18-3.65L114.18-3.65Q115.52-2.50 117.18-2.50L117.18-2.50L117.18-2.50Q118.85-2.50 119.81-3.14L119.81-3.14L119.81-3.14Q120.77-3.78 121.47-5.06L121.47-5.06L121.47-5.06Q123.39-8.51 124.93-19.07L124.93-19.07L124.93-19.07Q125.38-22.08 125.38-25.09L125.38-25.09L125.38-25.09Q125.38-28.10 124.70-29.06L124.70-29.06L124.70-29.06Q124.03-30.02 122.75-30.02L122.75-30.02L122.75-30.02Q118.85-30.02 117.57-22.40L117.57-22.40ZM144.22-1.92L144.22-1.92L144.22-1.92Q142.72-3.58 142.05-6.21L142.05-6.21L142.05-6.21Q141.38-8.83 141.38-13.12L141.38-13.12L141.38-13.12Q141.38-17.41 142.85-21.31L142.85-21.31L142.85-21.31Q144.32-25.22 147.01-28.03L147.01-28.03L147.01-28.03Q152.51-33.92 161.60-33.92L161.60-33.92L161.60-33.92Q164.86-33.92 167.23-32.83L167.23-32.83L178.18-33.92L173.44-8.96L173.44-8.96Q173.25-8.19 173.25-6.78L173.25-6.78L173.25-6.78Q173.25-5.38 174.11-4.48L174.11-4.48L174.11-4.48Q174.98-3.58 176.26-3.46L176.26-3.46L176.26-3.46Q175.62-1.28 173.28 0L173.28 0L173.28 0Q170.94 1.28 168.32 1.28L168.32 1.28L168.32 1.28Q165.70 1.28 163.94 0.29L163.94 0.29L163.94 0.29Q162.18-0.70 161.66-2.37L161.66-2.37L161.66-2.37Q160.64-0.77 158.46 0.26L158.46 0.26L158.46 0.26Q156.29 1.28 153.38 1.28L153.38 1.28L153.38 1.28Q150.46 1.28 148.10 0.51L148.10 0.51L148.10 0.51Q145.73-0.26 144.22-1.92ZM157.73-27.90L157.73-27.90L157.73-27.90Q156.99-26.75 156.35-24.80L156.35-24.80L156.35-24.80Q155.71-22.85 154.66-17.63L154.66-17.63L154.66-17.63Q153.60-12.42 153.60-8.70L153.60-8.70L153.60-8.70Q153.60-4.99 154.18-3.90L154.18-3.90L154.18-3.90Q154.75-2.82 155.78-2.82L155.78-2.82L155.78-2.82Q157.82-2.82 159.33-4.77L159.33-4.77L159.33-4.77Q160.83-6.72 161.41-10.18L161.41-10.18L164.80-28.93L164.80-28.93Q163.46-30.08 161.89-30.08L161.89-30.08L161.89-30.08Q160.32-30.08 159.39-29.57L159.39-29.57L159.39-29.57Q158.46-29.06 157.73-27.90ZM227.71 1.28L227.71 1.28L227.71 1.28Q219.97 1.28 219.97-4.74L219.97-4.74L219.97-4.74Q219.97-7.36 221.09-12.45L221.09-12.45L221.09-12.45Q222.21-17.54 222.59-19.58L222.59-19.58L222.59-19.58Q223.49-24.26 223.49-25.73L223.49-25.73L223.49-25.73Q223.49-28.99 221.06-28.99L221.06-28.99L221.06-28.99Q219.46-28.99 217.92-26.78L217.92-26.78L217.92-26.78Q216.38-24.58 215.68-20.16L215.68-20.16L211.71 0L199.23 1.28L202.69-16.13L202.69-16.13Q203.26-19.01 203.78-22.27L203.78-22.27L203.78-22.27Q204.29-25.54 204.29-26.05L204.29-26.05L204.29-26.05Q204.29-28.99 202.11-28.99L202.11-28.99L202.11-28.99Q200.64-28.99 199.04-26.82L199.04-26.82L199.04-26.82Q197.44-24.64 196.54-20.16L196.54-20.16L192.64 0L180.03 1.28L186.75-32.64L197.18-33.92L196.10-27.46L196.10-27.46Q197.76-30.91 200.83-32.42L200.83-32.42L200.83-32.42Q203.90-33.92 208.70-33.92L208.70-33.92L208.70-33.92Q211.46-33.92 213.25-32.58L213.25-32.58L213.25-32.58Q215.04-31.23 215.62-29.06L215.62-29.06L215.62-29.06Q216.70-31.30 219.49-32.61L219.49-32.61L219.49-32.61Q222.27-33.92 225.70-33.92L225.70-33.92L225.70-33.92Q229.12-33.92 230.82-33.18L230.82-33.18L230.82-33.18Q232.51-32.45 233.54-31.23L233.54-31.23L233.54-31.23Q235.26-28.99 235.26-24.90L235.26-24.90L235.26-24.90Q235.26-20.86 233.54-12.48L233.54-12.48L233.54-12.48Q232.64-8.38 232.64-6.88L232.64-6.88L232.64-6.88Q232.64-5.38 233.50-4.48L233.50-4.48L233.50-4.48Q234.37-3.58 235.65-3.46L235.65-3.46L235.65-3.46Q235.01-1.28 232.80 0L232.80 0L232.80 0Q230.59 1.28 227.71 1.28Z"
					fill="#ffd5af"></path>
			</g>
		</g>
	</svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/workshop/js/lunr.min.js?1572340181"></script>
<script type="text/javascript" src="/workshop/js/auto-complete.js?1572340181"></script>
<script type="text/javascript">
    
        var baseurl = "\/workshop\/";
    
</script>
<script type="text/javascript" src="/workshop/js/search.js?1572340181"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/workshop/requirements/" title="Requirements" class="dd-item 
        
        
        
        ">
      <a href="/workshop/requirements/">
          Requirements
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/workshop/requirements/account/" title="AWS Account" class="dd-item 
        
        
        
        ">
      <a href="/workshop/requirements/account/">
          AWS Account
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/account/add_user_01/" title="Set user details" class="dd-item ">
        <a href="/workshop/requirements/account/add_user_01/">
        Set user details
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/account/add_user_02/" title="Set permissions" class="dd-item ">
        <a href="/workshop/requirements/account/add_user_02/">
        Set permissions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/account/add_user_03/" title="Add tags (optional)" class="dd-item ">
        <a href="/workshop/requirements/account/add_user_03/">
        Add tags (optional)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/account/add_user_04/" title="Review" class="dd-item ">
        <a href="/workshop/requirements/account/add_user_04/">
        Review
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/account/add_user_05/" title="Success" class="dd-item ">
        <a href="/workshop/requirements/account/add_user_05/">
        Success
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/workshop/requirements/lightsail/" title="AWS Lightsail" class="dd-item 
        
        
        
        ">
      <a href="/workshop/requirements/lightsail/">
          AWS Lightsail
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/add_lightsail_01/" title="Set lishtsail details" class="dd-item ">
        <a href="/workshop/requirements/lightsail/add_lightsail_01/">
        Set lishtsail details
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/add_lightsail_02/" title="Instance plan" class="dd-item ">
        <a href="/workshop/requirements/lightsail/add_lightsail_02/">
        Instance plan
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/add_lightsail_03/" title="Create instance" class="dd-item ">
        <a href="/workshop/requirements/lightsail/add_lightsail_03/">
        Create instance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/add_lightsail_04/" title="Success" class="dd-item ">
        <a href="/workshop/requirements/lightsail/add_lightsail_04/">
        Success
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/console/" title="Console" class="dd-item ">
        <a href="/workshop/requirements/lightsail/console/">
        Console
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/tools/" title="Install tools" class="dd-item ">
        <a href="/workshop/requirements/lightsail/tools/">
        Install tools
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/aws_configure/" title="AWS configure" class="dd-item ">
        <a href="/workshop/requirements/lightsail/aws_configure/">
        AWS configure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/requirements/lightsail/ssh_keygen/" title="SSH keygen" class="dd-item ">
        <a href="/workshop/requirements/lightsail/ssh_keygen/">
        SSH keygen
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/workshop/basics/" title="Basics" class="dd-item 
        
        
        
        ">
      <a href="/workshop/basics/">
          Basics
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workshop/basics/git/" title="Git" class="dd-item ">
        <a href="/workshop/basics/git/">
        Git
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/basics/version/" title="Semantic Versioning" class="dd-item ">
        <a href="/workshop/basics/version/">
        Semantic Versioning
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/basics/terraform/" title="Terraform" class="dd-item ">
        <a href="/workshop/basics/terraform/">
        Terraform
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/basics/kubernetes/" title="Kubernetes" class="dd-item ">
        <a href="/workshop/basics/kubernetes/">
        Kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/basics/helm/" title="Helm" class="dd-item ">
        <a href="/workshop/basics/helm/">
        Helm
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/workshop/terraform/" title="Terraform" class="dd-item 
        
        
        
        ">
      <a href="/workshop/terraform/">
          Terraform
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workshop/terraform/backend/" title="Backend" class="dd-item ">
        <a href="/workshop/terraform/backend/">
        Backend
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/terraform/git_clone/" title="Clone" class="dd-item ">
        <a href="/workshop/terraform/git_clone/">
        Clone
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/terraform/vpc/" title="VPC" class="dd-item ">
        <a href="/workshop/terraform/vpc/">
        VPC
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/terraform/eks/" title="EKS" class="dd-item ">
        <a href="/workshop/terraform/eks/">
        EKS
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/workshop/kubernetes/" title="Kubernetes" class="dd-item 
        parent
        
        
        ">
      <a href="/workshop/kubernetes/">
          Kubernetes
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/tiller/" title="helm tiller" class="dd-item ">
        <a href="/workshop/kubernetes/tiller/">
        helm tiller
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/nginx-ingress/" title="nginx-ingress" class="dd-item active">
        <a href="/workshop/kubernetes/nginx-ingress/">
        nginx-ingress
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/cert-manager/" title="cert-manager" class="dd-item ">
        <a href="/workshop/kubernetes/cert-manager/">
        cert-manager
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/kube2iam/" title="kube2iam" class="dd-item ">
        <a href="/workshop/kubernetes/kube2iam/">
        kube2iam
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/metrics-server/" title="metrics-server" class="dd-item ">
        <a href="/workshop/kubernetes/metrics-server/">
        metrics-server
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/cluster-autoscaler/" title="cluster-autoscaler" class="dd-item ">
        <a href="/workshop/kubernetes/cluster-autoscaler/">
        cluster-autoscaler
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/efs-provisioner/" title="efs-provisioner" class="dd-item ">
        <a href="/workshop/kubernetes/efs-provisioner/">
        efs-provisioner
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/prometheus/" title="prometheus" class="dd-item ">
        <a href="/workshop/kubernetes/prometheus/">
        prometheus
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/grafana/" title="grafana" class="dd-item ">
        <a href="/workshop/kubernetes/grafana/">
        grafana
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/jenkins/" title="jenkins" class="dd-item ">
        <a href="/workshop/kubernetes/jenkins/">
        jenkins
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/docker-registry/" title="docker-registry" class="dd-item ">
        <a href="/workshop/kubernetes/docker-registry/">
        docker-registry
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/chartmuseum/" title="chartmuseum" class="dd-item ">
        <a href="/workshop/kubernetes/chartmuseum/">
        chartmuseum
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workshop/kubernetes/sonatype-nexus/" title="sonatype-nexus" class="dd-item ">
        <a href="/workshop/kubernetes/sonatype-nexus/">
        sonatype-nexus
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/workshop/devops/" title="DevOps" class="dd-item 
        
        
        
        ">
      <a href="/workshop/devops/">
          DevOps
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/nalbam/workshop"><i class='fab fa-fw fa-github'></i> GitHub</a>
              </li>
          
              <li> 
                  <a class="padding" href="/workshop/credits"><i class='fas fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/nalbam/workshop/edit/master/content/kubernetes/nginx-ingress.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/workshop/'>Home</a> > <a href='/workshop/kubernetes/'>Kubernetes</a> > nginx-ingress
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              nginx-ingress
            </h1>
          

        



<blockquote>
<p>Nmaespace 를 생성 합니다.</p>
</blockquote>

<pre><code class="language-bash">kubectl create namespace kube-ingress
</code></pre>

<blockquote>
<p>nginx-ingress 를 <strong>DaemonSet</strong> 으로 설치 합니다.</p>
</blockquote>

<pre><code class="language-bash">cat &lt;&lt; EOF | helm upgrade --install nginx-ingress stable/nginx-ingress --namespace kube-ingress --values -
controller:
  kind: DaemonSet
  config:
    use-forwarded-headers: &quot;true&quot;
  service:
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-connection-idle-timeout: &quot;3600&quot;
EOF
</code></pre>

<blockquote>
<p>설치 내역을 확인 합니다.</p>
</blockquote>

<pre><code class="language-bash">helm list
helm history nginx-ingress

kubectl get pod,svc -n kube-ingress
</code></pre>

<blockquote>
<p>ELB 주소를 확인 합니다.</p>
</blockquote>

<pre><code class="language-bash">ELB_DOMAIN=&quot;$(kubectl get svc -n kube-ingress | grep LoadBalancer | grep nginx-ingress-controller | awk '{print $4}')&quot;
echo ${ELB_DOMAIN}
</code></pre>

<blockquote>
<p>ELB 주소를 Route53 에서 원하는 도메인의 CNAME 으로 등록 합니다.</p>

<p><strong>mzdev.be</strong> 라는 도메인이 있고, ELB 주소를 *<strong>.spot.mzdev.be</strong> 로 연결 하고자 할때 다음과 같은 방법으로 등록 할수 있습니다.</p>
</blockquote>

<pre><code class="language-bash">ROOT_DOMAIN=&quot;mzdev.be&quot;
BASE_DOMAIN=&quot;spot.${ROOT_DOMAIN}&quot;

# HostedZoneId
ZONE_ID=&quot;$(aws route53 list-hosted-zones | ROOT_DOMAIN=${ROOT_DOMAIN}. jq -r '.HostedZones[] | select(.Name==env.ROOT_DOMAIN) | .Id' | cut -d'/' -f3)&quot;
echo ${HostedZoneId}

# CanonicalHostedZoneNameID
ELB_SUB_ID=&quot;$(echo ${ELB_DOMAIN} | cut -d'-' -f1)&quot;
echo ${ELB_SUB}

ELB_ZONE_ID=&quot;$(aws elb describe-load-balancers --load-balancer-name ${ELB_SUB_ID} | jq -r '.LoadBalancerDescriptions[] | .CanonicalHostedZoneNameID')&quot;
echo ${ELB_ZONE_ID}
</code></pre>

<pre><code class="language-bash">RECORD=&quot;/tmp/route53_record.json&quot;

cat &gt; ${RECORD} &lt;&lt; EOF
{
  &quot;Changes&quot;: [
    {
      &quot;Action&quot;: &quot;UPSERT&quot;,
      &quot;ResourceRecordSet&quot;: {
        &quot;Name&quot;: &quot;*.${BASE_DOMAIN}&quot;,
        &quot;Type&quot;: &quot;A&quot;,
        &quot;AliasTarget&quot;: {
          &quot;HostedZoneId&quot;: &quot;${ELB_ZONE_ID}&quot;,
          &quot;DNSName&quot;: &quot;${ELB_DOMAIN}&quot;,
          &quot;EvaluateTargetHealth&quot;: false
        }
      }
    }
  ]
}
EOF

aws route53 change-resource-record-sets --hosted-zone-id ${ZONE_ID} --change-batch file://${RECORD}
</code></pre>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/workshop/kubernetes/tiller/" title="helm tiller"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/workshop/kubernetes/cert-manager/" title="cert-manager" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/workshop/js/clipboard.min.js?1572340181"></script>
    <script src="/workshop/js/perfect-scrollbar.min.js?1572340181"></script>
    <script src="/workshop/js/perfect-scrollbar.jquery.min.js?1572340181"></script>
    <script src="/workshop/js/jquery.sticky.js?1572340181"></script>
    <script src="/workshop/js/featherlight.min.js?1572340181"></script>
    <script src="/workshop/js/highlight.pack.js?1572340181"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/workshop/js/modernizr.custom-3.6.0.js?1572340181"></script>
    <script src="/workshop/js/learn.js?1572340181"></script>
    <script src="/workshop/js/hugo-learn.js?1572340181"></script>

    <link href="/workshop/mermaid/mermaid.css?1572340181" rel="stylesheet" />
    <script src="/workshop/mermaid/mermaid.js?1572340181"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>

